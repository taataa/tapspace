<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Affinedom scaffold</title>

  <!-- Disable user scalability to override native touch gestures. -->
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <style>
    body {
      background: gray;
    }
    .viewport {
      width: 80%;
      height: 20rem;
      background: black;
    }
    .tile {
      width: 10rem;
      height: 10rem;
      background: white;
    }
  </style>
</head>
<body>
  <!-- Container element for viewing space -->
  <div id="viewport" class="affine-viewport">
    <div class="affine-space">
      <div class="affine-element">
        <h1>Hello World</h1>
      </div>
    </div>
  </div>

  <!-- Import affinedom. -->
  <script src="../dist/affinedom.min.js"></script>

  <!-- Your code -->
  <script>
    // View setup
    const affine = affinedom
    const aview = affine.viewport('#viewport')
    // or createView, createViewport or view
    const aspace = affine.space(document.querySelector('.affine-space'))
    // or createSpace

    // Create your element any way you want,
    // e.g. by templates, jquery or plain vanilla JS...
    const tile = document.createElement('div')
    tile.className = 'tile'
    aspace.appendChild(tile)

    // Make tile an Affinedom Element.
    const atile = affine(tileEl)

    // Create element fractal
    const fractal = affine.fractal({
      constructor: () => {

      },
      destructor: () => {

      },
      reverse: () => {

      },
      depth: 3,
    })


    const aview = affine.view('#viewport')

    const tile = document.createElement('div')
    tile.className = 'tile'
    tile.innerHTML = 'Hello'
    aview.appendChild(tile)

    const atile = affine(tile)
    const m = affine.move(atile.atMid(), view.atMid())
    atile.move(m)
    atile.rotate(atile.atMid(), Math.PI / 2)

    const drag = aview.draggable()
    drag.enable.pan()
    drag.enable.scale()

    const wheel = aview.wheelable()
    wheel.enable.scale()

    const tile2 = document.createElement('div')
    tile2.className = 'tile'
    tile2.innerHTML = 'World'
    aview.appendChild(tile2)

    const atile2 = affine(tile2)

    const tr = affine.estimateTransform({
      source: [
        atile2.atTopLeft(),
        atile2.atBottomLeft()
      ],
      target: [
        atile.atMidRight(),
        atile2.atBottomRight()
      ]
    )
    atile2.transform(tr)

  </script>
</body>
</html>
