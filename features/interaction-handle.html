<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Interaction Modes - Tapspace Features</title>

  <!-- Disable user scalability to override native touch gestures. -->
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- your custom styles -->
  <style>
    body {
      background: black;
      color: grey;
    }
    .myspaceapp {
      background: gray;
      height: 500px;
    }
    .mycomponent {
      background: white;
      color: black;
    }
    .mylabel {
      margin-top: 1rem;
      text-align: center;
      font-size: 1rem;
    }
    .mycomponent.active {
      background: #EEE;
    }
    .mycomponent.disabled {
      cursor: not-allowed;
    }
    .movable, .affine-proxy {
      cursor: grab;
    }
    .affine-proxy.active-pinch,
    .active-pinch .affine-proxy {
      cursor: grabbing;
    }
  </style>
</head>
<body>
  <!-- A tapspace viewport -->
  <div id="tapspace" class="myspaceapp"></div>

  <!-- Import tapspace. -->
  <script src="../dist/tapspace.min.js"></script>

  <!-- Your code -->
  <script>
    // Setup the tapspace viewport and the default layer for content.
    const space = tapspace.createSpace('#tapspace')
    const viewport = space.getViewport().zoomable()
    const layer = space.addBasis()

    // Create three affine elements - one for each mode
    const template = (t) => '<p class="mylabel">' + t + '</p>'

    const noinput = tapspace.createItem(template('Disabled'))
    noinput.setAnchor(noinput.atMid())
    noinput.setSize(100, 100)
    noinput.addClass('mycomponent', 'disabled')
    // noinput.setAction('none')
    noinput.disable()
    noinput.disableContent()
    layer.addChild(noinput, viewport.at(200, 200))

    const handle = tapspace.createItem(template('Handle for viewport with ' +
      'passive content.'))
    handle.setAnchor(handle.atMid())
    handle.setSize(100, 100)
    handle.addClass('mycomponent')
    handle.disableContent()
    // handle.setAction('handle')
    // handle.handlable()
    layer.addChild(handle, viewport.at(400, 200))

    const frame = tapspace.createItem(template(
      'Active content with <a href="#">links</a> and ' +
      '<input value="fields" style="width: 80px"/>'))
    frame.setAnchor(frame.atMid())
    frame.setSize(100, 100)
    frame.addClass('mycomponent')
    // frame.setAction('content')
    // frame.interactive() or just so by default
    layer.addChild(frame, viewport.at(600, 200))

    const movable = tapspace.createItem(template('Movable item'))
    movable.setAnchor(movable.atMid())
    movable.setSize(100, 100)
    movable.addClass('mycomponent', 'movable')
    // movable.setAction('drag')
    movable.draggable()
    movable.disableContent()
    layer.addChild(movable, viewport.at(200, 400))

    const tappable = tapspace.createItem(template('Tappable handle for viewport'))
    tappable.setAnchor(tappable.atMid())
    tappable.setSize(100, 100)
    tappable.addClass('mycomponent')
    // tappable.setAction('tap', 'handle')
    tappable.tappable()
    tappable.getCapturer('gesture').update({
      preventDefault: false
    })
    tappable.disableContent()
    // tappable.setActionMode('greedy-handle')
    // .setProxyMode, .setHandling, .makeHandle, .setActionMode,
    // .setHandleMode, .setHandle
    tappable.on('tapstart', () => { tappable.addClass('active') })
    tappable.on('tapend', () => { tappable.removeClass('active') })
    tappable.on('tapcancel', () => { tappable.removeClass('active') })
    tappable.on('tap', () => { tappable.rotateByDegrees(45, tappable.atMid()) })
    layer.addChild(tappable, viewport.at(400, 400))

    const inhandle = tapspace.createItem(template('Movable item with ' +
      'active content and ' +
      'a handle. <button class="affine-proxy">&hellip;</button>'))
    inhandle.setAnchor(inhandle.atMid())
    inhandle.setSize(100, 100)
    inhandle.addClass('mycomponent')
    // inhandle.setAction('content', 'drag')
    inhandle.draggable()
    layer.addChild(inhandle, viewport.at(600, 400))
  </script>
</body>
</html>
