<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Perspective 3D - Tapspace Features</title>

  <!-- TODO simplify for release -->

  <!-- Disable user scalability to override native touch gestures. -->
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- base styles for affine elements -->
  <link rel="stylesheet" href="../tapspace.css">
  <!-- your custom styles -->
  <style>
    body {
      background: white;
      color: black;
    }
    .container {
      background: #BBB;
    }
    .myspaceapp {
      background: #DDD;
    }
    .card {
      border: 2px solid #333;
      background: white;
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      padding: 8px;
    }
    .card img {
      float: left;
      margin-right: 10px;
      width: 200px;
      height: 200px;
    }
    .card p {
      margin-top: 0;
    }
  </style>
</head>
<body>
  <!-- Container element for viewing space -->
  <div class="container">
    <div id="tapspace" class="myspaceapp"></div>
  </div>

  <!-- Import tapspace. -->
  <script src="../dist/tapspace.min.js"></script>

  <!-- Your code -->
  <script>
    // Init tapspace
    const space = tapspace.space('#tapspace', {
      size: { width: '100%', height: '600px' }
    })
    const view = space.viewport().zoomable().perspective()
    const layer = space.plane()

    // Create html card element with image and text
    const createCardElement = function (url, txt) {
      const el = document.createElement('div')
      el.className = 'card'
      el.innerHTML = '<img src="' + url + '"> <p>' + txt + '</p>'
      return el
    }

    // Placeholder text
    const lorem = `Fundin creatures cooked question? Clothing great Dunharrow. Deputy so morning Valar tree rising born. Forging Sauron the White surrender! What's the Elvish word for 'friend'? Bain unprotected wiser. Rightfully risen DÃ®. Gibbets can't didn't fun.`

    // Tapspace element settings
    const cardConfig = {
      size: { width: 440, height: 220 },
      anchor: { x: 220, y: 110 }
    }

    // Create cards elements
    const cardElements = [
      createCardElement('assets/placeholder400.png', lorem),
      createCardElement('assets/placeholder400.png', lorem),
      createCardElement('assets/placeholder400.png', lorem)
    ]

    // Create affine cards
    const cards = cardElements.map((elem) => {
      return tapspace.element(elem, cardConfig)
    })

    // Position the cards into space
    layer.add(cards[0], view.atNorm(0.38, 0.5, 0))
    layer.add(cards[1], cards[0].atTopRight().offset(0, -100, 100))
    layer.add(cards[2], cards[1].atBottomRight().offset(0, 100, 100))

  </script>
</body>
</html>
